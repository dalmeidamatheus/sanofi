<!DOCTYPE html>
<html>
<head>
    <title>Sanofi</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css"> 
    <style>
        /* Adicionei estilos de exemplo para ilustrar a aparência dos dados fictícios */
        .collapsible {
            background-color: #f1f1f1;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 20px;
        }

        .content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-light" style="background-color: #eef8ff;">
    <div class="container d-flex justify-content-center">
        <span class="navbar-brand mb-0 h1" style="font-weight: bold; font-size: 30px;">Sanofi</span>
    </div>
</nav>

<div id="loading" style="display: none;">Carregando Resultado...</div>
<input type="text" id="principio-json" value="{'Buscopan': '10'}" style="display: none;">
<div id="result"></div>
<table id="input-table" style="display: none;">
    <tr>
        <th colspan="2">Valor(es) enviado(s)</th>
    </tr>
    <tr>
        <th>Principio</th>
        <th>Concentração (MG)</th>
    </tr>
</table>
<button id="retornar">Retornar à Página Inicial</button>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const loading = document.getElementById("loading");
    const result = document.getElementById("result");
    const principioJSON = document.getElementById("principio-json").value.replace(/'/g, '"');
    const input_json = JSON.parse(principioJSON);

    function populateInputTable(data) {
        const table = document.getElementById("input-table");
        table.style.display = "block";
        table.innerHTML = `
            <tr>
                <th colspan='2'>Valor(es) enviado(s)</th>
            </tr>
            <tr>
                <th>Principio</th>
                <th>Concentração (MG)</th>
            </tr>
            <tr>
                <td>${Object.keys(data)[0]}</td>
                <td>${data[Object.keys(data)[0]]}</td>
            </tr>
        `;
    }

    populateInputTable(input_json);
    loading.style.display = "none";

    const resultList = document.createElement("ul");
    resultList.innerHTML = `
        <h3>Medicamento(s) próximo(s) aos dados informados:</h3>
        <h4>Obs: Em ordem de aproximação (mais parecido para o menos parecido)</h4>
        <li class="collapsible">Buscopan
            <ul class="content">
                <li>REGISTRO: 1781708900042,1781708900026,1781708900115,1781708900131</li>
                <li>APRESENTAÇÃO:
                    <ul>
                        <li>20 MG SOL INJ CT 5 AMP VD TRANS X 1 ML</li>
                        <li>10 MG/ML SOL GOT OR CT FR GOT VD AMB X 20 ML + SER DOS</li>
                        <li>10 MG DRG CT BL AL PLAS PVC/PVDC OPC X 20</li>
                        <li>10 MG/ML SOL GOT OR CT FR GOT VD AMB X 20 ML</li>
                    </ul>
                </li>
                <li>BUTILBROMETO DE ESCOPOLAMINA: 10mg</li>
            </ul>
        </li>
    `;
    result.appendChild(resultList);

    // Adicionar evento de colapso/expandir
    const collapsibleItems = document.querySelectorAll(".collapsible");
    for (let i = 0; i < collapsibleItems.length; i++) {
        collapsibleItems[i].addEventListener("click", function () {
            this.classList.toggle("active");
            const content = this.querySelector(".content");
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            }
        });
    }

    // Redirecionar para a página inicial
    const retornarButton = document.getElementById("retornar");
    retornarButton.addEventListener("click", function () {
        window.location.href = "/";
    });
});
</script>
</body>
</html>
